# Functional Requirements

## Auth / User Management
- ログイン: ユーザー名 + パスワード
- ログイン失敗時は原因を特定できない文言にする
- セッション: DB永続化、Cookie名 `inventory_session`、有効期限7日（ローリング更新）
- Cookie属性: `HttpOnly`, `SameSite=Lax`, 本番`Secure`
- 管理者コンソール: ヘッダーメニューからアクセス（ADMINのみ表示）
- ユーザー一覧: ユーザー名/ロール/作成日時（`YYYY/MM/DD HH:MM`）
- ロールバッジ: ADMIN=赤、USER=グレー
- 新規ユーザー: username(3-50, 英数字/アンダースコア/ハイフン), password(>=8), role
- ユーザー編集: ユーザー名/ロールのみ（パスワードは別途リセット）
- パスワードリセット: 対象ユーザーの全セッション削除
- ユーザー削除: 自分自身/最後のADMINは削除不可
- 自分のパスワード変更: 現在PW確認 + 全セッション削除
- 権限: ADMIN=ユーザー管理+全機能, USER=商品/マスタCRUD

## Product Management
- 一覧: 20件/ページ、検索 + フィルタ + ページネーション
- 表示列（v2.0）: メーカー/品目/商品名/仕様/張地/カラー/個数/原価単価/場所
- 写真ビュー: 2列の大カード表示
- 検索: 商品名部分一致（SKU完全一致は旧仕様）
- リアルタイム検索: 300msデバウンス
- フィルタ: manufacturerId, categoryId, locationId, arrivalDate
- 選択: 行/全件チェック、フィルタ結果の全件選択（ページ外含む）
- 詳細: 全フィールド + 画像ギャラリー
- 画像: 追加/削除/並び替え可能
- 在庫数の変更履歴は将来機能
- 削除: 物理削除（画像はCascade）

## Image Upload
- DnD対応、プレビュー表示
- 形式: JPEG/PNG/WebP
- 最大: 5MB、5枚/商品

## Master Data
- メーカー/品目/場所/単位のCRUD
- 一覧に商品数を表示
- 削除時はProductの参照をSetNull

## Dashboard (v2.0)
- 商品総数、品目数、全商品の原価合計
- メーカー別原価合計（ソート可能）
- 最近の更新（追加/更新）
- 在庫アラートは廃止

## Print Layout
- A4固定: 2列×2行（4件/ページ）
- 印刷対象: 選択済み商品のみ
- 表示: 商品写真、メーカー、商品名、仕様、張地/カラー、定価、個数、単位、備考
- ブラウザ印刷 + PDF対応
- スマホは印刷機能非対応
